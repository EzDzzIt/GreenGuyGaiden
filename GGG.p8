pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--main engine functions

function _init()
	cls(0)
	player_x, player_y, xsp, ysp = 64,64,0,0
	jmpcnt, jmpcool = 0, 0
	grnd,dead = true,false
	t = 0
end

function _draw()
	cls(0)
	spr(1,player_x,player_y)
	print(player_x)
	print(player_y)
	print ("jmpcnt = " ..tostr(jmpcnt))
	print ("jmpcool = " ..tostr(jmpcool))

end

function _update60()
	move_player()
	
	if player_y >= 128 then
		dead = true
	end
	
	--debugging ground
	if player_y >= 100 then
		player_y = 100
		grnd = true
	end
	
	
	--t is my counter, dude
	t = t + 1
	if (t == 60) then
		t = 0
	end
end
-->8
--player movement code
function move_player()
	if grnd then
		if btn(0) then
			xsp = - 1
			if btn(1) then
				xsp = 0
			end
		elseif btn(1) then
				xsp = 1
		else
				xsp = 0
		end
		--x-movement while in the air slows?		
	elseif t%3 == 0 then
		if btn(0) then
			xsp = - 1
			if btn(1) then
				xsp = 0
			end
		elseif btn(1) then
				xsp = 1
		else
				xsp = 0
		end
	end
--move x
player_x = player_x + xsp

--gravity
if grnd then
	ysp = 0
else
	--accel limit?
	if t%2 == 0 then
		if ysp < 2 then
			ysp = ysp + 1
		end
	end
end

jmplim = 7

--jump logic
if jmpcool > 0 and grnd then
	jmpcool = jmpcool - 1
	jmpcnt = 0
else
	if(btn(4)) and (jmpcnt < jmplim) then
		if jmpcnt == 0 then
			jmpcool = 10
		end
		ysp = ysp - 1
		jmpcnt = jmpcnt + 1
		grnd = false
end

--move y
player_y = player_y + ysp

end
end
__gfx__
00000000c9c333cc0903330009033300090333000903330009033300ffccccffcccccccc55555555000000000000000000000000000000000000000000000000
06000060c89bb33c089bb330089bb330089bb330089bb330089bb330fccccfffcccccccc05050500000000000000000000000000000000000000000000000000
00700700c3bb7b7c03bb7b7003bb7b7003bb7b7003bb7b7003bb7b70ccccffffcccccccc5c5c5ff5000000000000000000000000000000000000000000000000
600770063bb7373c3bb737303bb737303bb737303bb737303bb73730cccfffffcccccccccccfffff000000000000000000000000000000000000000000000000
060770603bbb7b733bbb7b733bbb7b733bbb7b733bbb7b733bbb7b73ccfffffcccccccccccfffffc000000000000000000000000000000000000000000000000
007007003b3bb3b33b3b33b33b3b33b33b3b33b33b3b33b33b3b33b3cfffffcccccccccccfffffcc000000000000000000000000000000000000000000000000
00000000c3bbbb3c036bbb30036bbb30036bbb30036bbb30036bbb30fffffcccccccccccfffffccc000000000000000000000000000000000000000000000000
00000000663333660663336606633366066333660663336606633366ffffccccccccccccffffcccc000000000000000000000000000000000000000000000000
__gff__
0000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0808080808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808090909090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808010808080808070707070707070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0909090909090909070707070707070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
86010b002b65037650306502865024650206502a6502c6502d6502f65032650156503365035650366503765037650386503865039650396500065001650036500d650076500a6503165031650306502d65000000
